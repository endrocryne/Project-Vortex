# Project Vortex: 6-DOF Rocket Simulation

Welcome to Project Vortex! This project is a Python-based 6-Degrees-of-Freedom (6DOF) rocket simulation. This README file provides all the necessary information to understand, run, and contribute to the project.

## Phase 1: Vertical Flight Simulation

This initial phase simulates the flight of a simple rocket flying straight up in a vacuum. It does not include aerodynamics or control systems, focusing purely on the core physics of thrust and gravity.

### Quick Start (Phase 1)

Follow these steps to run the simulation and see the results.

#### Prerequisites

- Python 3.x
- Pip (Python package installer)

#### Installation

1.  **Clone the repository (or download the files):**
    ```bash
    git clone <repository-url>
    cd project-vortex
    ```

2.  **Install the required Python libraries:**
    ```bash
    pip install numpy scipy matplotlib
    ```

#### Running the Simulation

Execute the main simulation script from your terminal:
```bash
python phase1_simulation.py
```
This script is not included in the current version of the repository but is kept here for historical context.

---

## Phase 2: 6-DOF Controlled Flight Simulation

This phase implements a full 6-DOF simulation for a rocket with active stabilization via Thrust Vector Control (TVC). It models aerodynamic forces, gravity, and a PID-controlled gimbal system to maintain a stable, vertical trajectory even with an initial disturbance.

### Running the Phase 2 Simulation

Execute the main simulation script from your terminal:
```bash
python phase2_simulation.py
```
After running, the script will perform the simulation and open an interactive GUI window with multiple tabs for analyzing the flight data.

### How It Works

The simulation models the rocket's state in 13 dimensions (`position [x, y, z]`, `velocity [vx, vy, vz]`, `orientation [qw, qx, qy, qz]`, and `angular velocity [ωx, ωy, ωz]`). The `rocket_dynamics` function calculates the forces and torques acting on the rocket at each time step, including:
- **Gravity:** A constant downward force.
- **Thrust:** A force generated by the engine, directed by a gimbal system.
- **Aerodynamic Drag:** A force opposing the rocket's velocity.
- **Aerodynamic Torque:** A destabilizing torque caused by the offset between the Center of Pressure (CP) and the Center of Mass (CoM).
- **Control Torque:** A stabilizing torque generated by the TVC system to counteract disturbances.

A PID controller adjusts the engine's gimbal angle to correct for pitch and yaw errors, actively stabilizing the rocket.

### Configuration

You can modify the constants at the top of `phase2_simulation.py` to see how they affect the rocket's flight.

#### Key Physical Constants
- `DRY_MASS` / `PROPELLANT_MASS`: Mass properties of the rocket.
- `THRUST_FORCE`: Force produced by the engine.
- `AIR_DENSITY`: Used for calculating aerodynamic forces.
- `DRAG_COEFFICIENT`: A dimensionless number that quantifies the drag or resistance of the rocket in the air.
- `CP_VECTOR`: The vector from the CoM to the Center of Pressure. A positive Z value means the CP is ahead of the CoM, causing aerodynamic instability.
- `GIMBAL_VECTOR`: The vector from the CoM to the gimbal pivot point.

#### PID Gains
- `KP`, `KI`, `KD`: Proportional, Integral, and Derivative gains for the PID controller. These have been tuned to provide stable flight. Tweaking them can lead to different control responses (e.g., more aggressive, more sluggish, or unstable).

### Understanding the Output

The script generates an interactive window with the following plots:
- **Position:** Shows the rocket's X, Y, and Z coordinates over time.
- **Velocity:** Shows the rocket's velocity components (Vx, Vy, Vz) over time.
- **Acceleration:** Displays the calculated acceleration in all three axes.
- **Tilt Error:** Plots the pitch and yaw errors in degrees. This is a crucial graph for seeing how well the PID controller is stabilizing the rocket.
- **Gimbal Command:** Shows the commanded pitch and yaw angles for the engine gimbal.
- **3D Trajectory:** A 3D plot of the rocket's flight path.

### Debugging

If you encounter issues with the Phase 2 simulation, consider the following:
1.  **"ModuleNotFoundError"**: Ensure you have installed the required libraries: `pip install numpy scipy matplotlib`.
2.  **Simulation Hangs or Crashes**: This can happen if the PID controller is poorly tuned, causing the simulation to diverge.
    - Check the `KP`, `KI`, `KD` values. If you've changed them, try reverting to the original tuned values.
    - Add `print` statements inside the `rocket_dynamics` function to inspect forces, torques, and state variables at different time steps.
3.  **"TclError: no display name"**: This error occurs if you are running the script in an environment without a graphical user interface (GUI), such as a remote server or a Docker container. The simulation will still run and print the final data to the console, but the plot window cannot be displayed. You can comment out the Tkinter-related code at the end of the script if you only need the raw data output.
4.  **Unexpected Flight Behavior**: If the rocket immediately flips or goes unstable:
    - Verify the `CP_VECTOR`. A positive Z value makes the rocket aerodynamically unstable, which is a key challenge for the TVC system to overcome.
    - Ensure the PID error calculations and control logic have the correct signs (negative feedback). An error in this logic can cause the controller to amplify disturbances instead of correcting them.
